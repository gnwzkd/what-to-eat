webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),i=s("mvHQ"),o=s.n(i),a=s("ESwS"),r=s("+cKO");var d=null,l={name:"App",mixins:[a.validationMixin],data:function(){return{get stores(){var t=window.localStorage.getItem("whatToEat.stores");return t?JSON.parse(t):[]},set stores(t){t&&window.localStorage.setItem("whatToEat.stores",o()(t))},playing:!1,result:"",favoriteStore:"all",setting:{show:!1,stores:[],state:"store-list",currentStore:null,tmpFoods:""}}},validations:{setting:{currentStore:{name:{required:r.required}}}},methods:{randomFood:function(){var t=this.foods.length;return this.foods[Math.floor(Math.random()*t)]},toggle:function(){var t=this;this.playing=!this.playing;var e=function(e){t.result=t.randomFood()};if(this.playing)d=window.setInterval(e,16.7);else{d&&window.clearInterval(d);for(var s=10,n=0;s--;)n+=16.7*(10-s)*1.2,window.setTimeout(e,n)}},openSetting:function(){this.setting.stores=this.stores,this.setting.state="store-list",this.setting.show=!0},closeSetting:function(){this.setting.stores=[],this.setting.show=!1},editStore:function(t){this.setting.currentStore=t,this.setting.state="edit-store"},addStore:function(){var t={name:"",menu:[],enable:!0};this.setting.currentStore=t,this.setting.stores.push(t),this.setting.state="edit-store"},backToStores:function(){this.$v.setting.currentStore.name.$touch(),this.$v.setting.currentStore.name.$invalid||(this.$v.setting.currentStore.name.$reset(),this.setting.state="store-list")},deleteStore:function(){this.setting.stores.splice(this.setting.stores.indexOf(this.setting.currentStore),1),this.$v.setting.currentStore.name.$reset(),this.setting.state="store-list"},addMenu:function(){var t=this.setting.tmpFoods.replace(/\s+/g," ").trim();t&&(console.log(t.split(" ")),Array.prototype.push.apply(this.setting.currentStore.menu,t.split(" ")),this.setting.tmpFoods="")},deleteFood:function(t){this.setting.currentStore.menu.splice(t,1)},clearMenu:function(){this.setting.currentStore.menu=[]},saveSetting:function(){this.stores=this.setting.stores,this.setting.show=!1}},computed:{foods:function(){var t=[];if("all"===this.favoriteStore){for(var e=this.stores.length;e--;)if(this.stores[e].enable)for(var s=this.stores[e].menu.length;s--;)t.push(this.stores[e].menu[s]+"@"+this.stores[e].name)}else for(var n=this.stores[this.favoriteStore].menu,i=n.length;i--;)t.push(n[i]);return t},actionState:function(){return this.playing?"stop":"start"}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[s("md-app",{attrs:{"md-mode":"fixed"}},[s("md-app-toolbar",{staticClass:"md-primary"},[s("span",{staticClass:"md-title"},[t._v("今天吃啥？")]),t._v(" "),s("div",{staticClass:"md-toolbar-section-end"},[s("md-button",{staticClass:"md-icon-button",on:{click:t.openSetting}},[s("md-icon",[t._v("settings")])],1),t._v(" "),s("md-dialog",{staticClass:"setting-dialog",attrs:{"md-active":t.setting.show,"md-fullscreen":!0},on:{"update:mdActive":function(e){t.$set(t.setting,"show",e)}}},["store-list"===t.setting.state?s("div",{key:"store-list",staticClass:"setting-view"},[s("md-dialog-title",[t._v("设置")]),t._v(" "),s("md-toolbar",{staticClass:"md-primary",attrs:{"md-elevation":"1"}},[s("md-button",{staticClass:"md-icon-button",on:{click:t.closeSetting}},[s("md-icon",[t._v("close")])],1),t._v(" "),s("h3",{staticClass:"md-title",staticStyle:{flex:"1"}},[t._v("设置")]),t._v(" "),s("md-button",{staticClass:"md-icon-button",on:{click:t.saveSetting}},[s("md-icon",[t._v("save")])],1)],1),t._v(" "),s("md-dialog-content",{staticClass:"view-transition"},[t.setting.stores.length?s("md-list",{staticClass:"store-list md-double-line"},[s("md-subheader",[s("span",[t._v("店铺")]),t._v(" "),s("md-button",{staticClass:"md-icon-button",on:{click:t.addStore}},[s("md-icon",[t._v("add")]),t._v(" "),s("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("添加店铺")])],1)],1),t._v(" "),t._l(t.setting.stores,function(e,n){return[s("md-list-item",[s("md-checkbox",{model:{value:e.enable,callback:function(s){t.$set(e,"enable",s)},expression:"store.enable"}}),t._v(" "),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"fafa"},[t._v("\n                        "+t._s(e.menu.join(", "))+"\n                      ")])]),t._v(" "),s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){s.stopPropagation(),t.editStore(e)}}},[s("md-icon",[t._v("edit")])],1)],1),t._v(" "),n+1<t.setting.stores.length?s("md-divider",{staticClass:"md-inset"}):t._e()]})],2):s("md-empty-state",{attrs:{"md-icon":"store","md-label":"没有店铺","md-description":"你真是怠惰呢。"}},[s("md-button",{staticClass:"md-primary md-raised",on:{click:t.addStore}},[t._v("添加")])],1),t._v(" "),s("md-button",{staticClass:"control-button fixed-fab md-fab md-plain",on:{click:t.addStore}},[s("md-icon",[t._v("add")])],1)],1),t._v(" "),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.setting.show=!1}}},[t._v("关闭")]),t._v(" "),s("md-button",{staticClass:"md-primary",on:{click:t.saveSetting}},[t._v("保存")])],1)],1):"edit-store"===t.setting.state?s("div",{key:"edit-store",staticClass:"setting-view"},[s("md-dialog-title",[t._v("编辑")]),t._v(" "),s("md-toolbar",{staticClass:"md-primary",attrs:{"md-elevation":"1"}},[s("md-button",{staticClass:"md-icon-button",on:{click:t.backToStores}},[s("md-icon",[t._v("arrow_back")])],1),t._v(" "),s("h3",{staticClass:"md-title",staticStyle:{flex:"1"}},[t._v("编辑")]),t._v(" "),s("md-button",{staticClass:"md-icon-button",on:{click:t.deleteStore}},[s("md-icon",[t._v("delete")])],1)],1),t._v(" "),s("md-dialog-content",{staticClass:"view-transition"},[s("md-field",{class:{"md-invalid":t.$v.setting.currentStore.name.$dirty&&t.$v.setting.currentStore.name.$invalid}},[s("label",[t._v("店名")]),t._v(" "),s("md-input",{on:{blur:t.$v.setting.currentStore.name.$touch},model:{value:t.setting.currentStore.name,callback:function(e){t.$set(t.setting.currentStore,"name",e)},expression:"setting.currentStore.name"}}),t._v(" "),t.$v.setting.currentStore.name.required?t._e():s("span",{staticClass:"md-error"},[t._v("必须填写")])],1),t._v(" "),s("md-field",[s("label",[t._v("添加菜单")]),t._v(" "),s("md-input",{attrs:{placeholder:"菜单：空格隔开可添加多个"},on:{keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addMenu(e):null}},model:{value:t.setting.tmpFoods,callback:function(e){t.$set(t.setting,"tmpFoods",e)},expression:"setting.tmpFoods"}}),t._v(" "),s("md-button",{staticClass:"md-icon-button md-input-action",on:{click:t.addMenu}},[s("md-icon",[t._v("send")])],1)],1),t._v(" "),s("p",[t._l(t.setting.currentStore.menu,function(e,n){return s("md-chip",{key:n,staticClass:"md-layout-item",attrs:{"md-deletable":""},on:{"md-delete":function(e){t.deleteFood(n)}}},[t._v(t._s(e))])}),t._v(" "),t.setting.currentStore.menu.length?s("md-chip",{staticClass:"md-accent md-layout-item",attrs:{"md-deletable":""},on:{"md-delete":t.clearMenu}},[t._v("清空")]):t._e()],2)],1),t._v(" "),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:t.backToStores}},[t._v("返回")]),t._v(" "),s("md-button",{staticClass:"md-accent",on:{click:t.deleteStore}},[t._v("删除")])],1)],1):t._e()])],1)]),t._v(" "),s("md-app-content",[s("md-card",{staticClass:"content-card"},[s("md-card-header",[s("md-field",[s("label",{attrs:{for:"favorite-store"}},[t._v("店铺")]),t._v(" "),s("md-select",{attrs:{name:"favorite-store",id:"favorite-store","md-dense":""},model:{value:t.favoriteStore,callback:function(e){t.favoriteStore=e},expression:"favoriteStore"}},[s("md-option",{attrs:{value:"all"}},[t._v("随便，都行")]),t._v(" "),t._l(t.stores,function(e,n){return s("md-option",{key:n,attrs:{value:n}},[t._v(t._s(e.name))])})],2)],1)],1),t._v(" "),s("md-card-content",[t.foods.length?s("p",{staticClass:"result"},[t._v(t._s(t.result||" "))]):s("md-empty-state",{attrs:{"md-icon":"restaurant_menu","md-label":"没有内容","md-description":"当前选择下没有内容，你可以去添加一些。"}},[s("md-button",{staticClass:"md-primary md-raised",on:{click:t.openSetting}},[t._v("添加")])],1)],1)],1),t._v(" "),t.foods.length?s("md-button",{staticClass:"control-button fixed-fab md-fab md-plain",on:{click:t.toggle}},[s("i",{staticClass:"action-icon",class:t.actionState})]):t._e()],1)],1)],1)},staticRenderFns:[]};var m=s("VU/8")(l,c,!1,function(t){s("vDgd")},null,null).exports,u=s("Lgyv"),v=s.n(u);s("tzNG"),s("giDI");n.default.use(v.a),n.default.config.productionTip=!1,new n.default({el:"#app",components:{App:m},template:"<App/>"})},giDI:function(t,e){},tzNG:function(t,e){},vDgd:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b9eba3afce2f06f2f5ff.js.map